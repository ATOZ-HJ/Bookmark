# 一、项目优化点以及优化建议

## 技术侧

### 交互方式优化

#### web --> java

1. 采用websocket的方法，由服务端进行推送
2. 采用 text/event-stream ，协议



#### Java  <---> python

1. 采用Kafka作为消息队列，触发回测请求，以及回测结果直接推动到Kafka，Java端和python端 作为消费者监听不同topic





### 微服务改造

1. 服务集成注册中心以及配置中心，配置网关





### 中间件集成

1. 引入Kafka消息队列
2. 引入redis，目前主要针对场景是对首页或者一些热点数据缓存



### 数据库优化

1. 数据库查询优化，目前已有数据量较大的表查询较慢的情况
2. 数据库自增id去除
3. 分布式id引入









### 回测功能

#### 页面和Java端服务交互方式

##### 现阶段

采用前端轮询后端回测状态接口，根据不同状态调用不同接口，轮询的方式，性能差，实现不优雅 (目前该场景大多采用这种方法)

##### 优化建议

1. 采用websocket的方法，由服务端进行推送
2. 采用 text/event-stream ，协议



#### 回测结果数据后台处理

目前py端处理完成后，Java端通过定时任务监听py端的回测状态，查询对应的回测结果，拿到回测结果后落表，落表完成后返回给前端；

1. java请求py，有网络开销，有定时任务开销，实时性差，并且返回结果数据量可能较大，解析时间长
2. web--->java--->py，py端已经计算出结果，只不过在Java端解析后又重新落表，数据冗余
3. Java端目前的实现方式导致数据量较大，单表查询已经较慢



##### 优化建议

1. 可以考虑去除Java端重复落表这一层，Java端直接调用mongodb，查询数据后进行简单处理后返回给前端
2. Java端和py端交互方式更改，增加消息中间件Kafka，采用消息队列
3. 对数据库进行查询优化













































# 二、项目的技术架构方向

