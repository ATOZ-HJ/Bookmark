# 工作列表

## Before

### 浙商对接

#### 万德估值数据

1. 历史数据导入
   1. 在公司内部TiDB数据库，测试大数据量下的导入性能，表结构对应固收Oracle中TB_OBJECT_1090、TB_OBJECT_1804，行内需要在2天内导入所有数据
2. 每日增量数据导入
   1. 开发一个工具解析行内提供的每日的增量数据文件
   2. 行内每天早上会定时将增量数据同步到固收的两张表中TB_OBJECT_1090、TB_OBJECT_1804，量化端开发一个同步脚本，每天定时将数据同步到量化对应的数据库中。行内有自己的定时任务平台，行内不提供工具来同步数据库。



#### 方案初始设计

**历史数据导入**

1. 公司内部TiDB环境创建测试数据库
2. 创建TB_OBJECT_1090，TB_OBJECT_1804表
3. 写个Java程序mock数据库数据到达指定数据量
4. 将mock后的数据导出，在重新导入，测试一下导入的性能和时间
5. 2017年至今的历史数据，每天数据8万，需要除去非交易日)



**每日增量数据**

1. 开发脚本同步固收数据到量化，需要注意同步的时间结点，需要等待固收数据同步完成后才能去同步
2. 脚本是否属于行情模块的一部分呢，还是说单独作为一个脚本 



# 43周

1. 固收增值数据导入测试，文档输出，预计周三或者周四完成
2. 前端页面中修改token的获取方式
3. 量化环境改造，改造内容代码评审
4. 根据文档安装Kafkamanager
5. 与天雨沟通portal的逻辑



## 11.01

- [x] 根据文档安装Kafkamanager





## 11.02

- [x] 冰成哥提出的数据库字段字符集的问题
- [ ] 债券环境收益率曲线报错问题解决
  - [ ] 待固收同事确认
- [ ] 与马哥沟通改造内容
- [x] 回测端代码评审
  - [x] Kafka架构下 ，生产者和消费者逻辑
  - [x] 收益概览和交易图示接口的问题
  - [x] 查询行情中心接口
- [x] 量化环境
  - [x] test和multi环境版本
  - [x] 待系统稳定后，部署一套稳定环境区分test环境，是否可以使用腾讯云环境



## 11.03

### 代码评审

回测超时，无法监控到回测的实际执行状况







## 11.04

- [x] python端代码评审

1. 回测的时候Kafka和mongo的配置是否重复加载
2. 



- [ ] 增值的数据一亿条同步
- [x] 招行文档输出



## 11.05

- [x] 增值数据导出收尾工作





# 44周

| 工作列表                                             |
| ---------------------------------------------------- |
| 1、因子计算、检测、回测 后期调整为MQ模式 ；          |
| 2、因子计算和因子检测基于业务架构确认。              |
| 3、策略大文件方案确认。                              |
| 4、批处理：因子计算-因子检测、因子回测需求内容确认。 |
| 5、代码层次：对象copy,魔法值问题 ；                  |
| 6、url地址变更：qt/版本/应用模块/动作                |
| 7、因子计算、查看改为MQ架构                          |



## 11.08

- [ ] 因子添加确认逻辑修改  ------ 暂时不考虑
  - [ ] 后台代码不再发送计算请求



## 11.09

压测环境部署

- [x] 行情中心
  - [x] ~~数据导入~~
  - [x] 70环境债券包部署
- [ ] python端部署
  - [ ] 镜像构建 --- 找不到部署镜像



## 11.09

压测环境部署

- [x] 行情中心
  - [x] ~~数据导入~~
  - [x] 70环境债券包部署
- [ ] python端部署
  - [ ] 镜像构建 --- 找不到部署镜像



估值数据导入

- [ ] 尝试优化方案后导入









```routeros
docker run -d --name kafka -p 9092:9092 -e KAFKA_BROKER_ID=0 -e KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 --link zookeeper -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://127.0.0.1:9092 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 -t wurstmeister/kafka
```

```
docker exec kafka kafka-topics.sh --create --zookeeper 127.0.0.1:2181 --replication-factor 1 --partitions 1 --topic test
```




 docker run  -d --name mybs -v /home/ksquant/qtengine/lego_quant_platform/lego_quant_platform/modules_src/vnpy/:/vnpy/ -v /home/ksquant/qtengine/lego_quant_platform/lego_quant_platform/modules_src/Server/:/Server -v /home/ksquant/qtengine/lego_quant_platform/lego_quant_platform/modules_src/config:/config -p 8090:8080 -p 9999:9999 backtest

